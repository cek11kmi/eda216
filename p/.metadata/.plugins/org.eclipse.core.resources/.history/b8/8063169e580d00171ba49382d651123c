import java.sql.SQLException;

import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Menu;
import javafx.scene.control.MenuBar;
import javafx.scene.control.MenuItem;
import javafx.scene.control.Tab;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class GUI {
	// Database
	private Database db;

	// Scene
	private Scene scene;

	// "Root"
	private VBox vBox;

	// Tab objects
	public TabCreatePallet tabCreatePallet;
	private TabRegisterPallet tabRegisterPallet;
	private TabSearchPallet tabSearchPallet;
	private TabBlockedPallets tabBlockedPallets;

	// Layout properties
	private final int GAP = 10;
	private final int PADDING = 15;

	// Menu bar
	private MenuBar menuBar;

	// Tabs
	private Tab tab5;

	public GUI(Stage primaryStage, Database db) throws SQLException {
		this.db = db;
		startDB();
		// "Root"
		vBox = new VBox();

		// Initialize menu bar and tabs
		initializeMenuBar(primaryStage);
		initializeTabs(primaryStage);

		// Scene
		scene = new Scene(vBox, 775, 450); // Arbitrary integers
	}

	private void initializeMenuBar(Stage primaryStage) {
		// MenuBar
		menuBar = new MenuBar();
		vBox.getChildren().add(menuBar);

		// Menu 1
		Menu menu1 = new Menu("Arkiv");
		MenuItem menu1Item1 = new MenuItem("Avsluta systemet");
		menu1Item1.setOnAction(new EventHandler<ActionEvent>() {

			public void handle(ActionEvent arg0) {
				db.closeConnection();
				System.exit(0);
			}

		});
		menu1.getItems().add(menu1Item1);



		// Add menus to the menu bar
		menuBar.getMenus().add(menu1);

	}

	private void initializeTabs(Stage primaryStage) {

	}

	private void startDB() throws SQLException {
		if (db.openConnection("cookies.db")) {
			System.out.println("Database connected");
			db.foreignKey();
		} else {
			System.out.println("Database not connected");
			System.exit(0);
		}
	}

	public Scene getScene() {
		return scene;
	}
}
